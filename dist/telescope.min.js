!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Telescope={})}(this,(function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},n="http://frontlo-collection.91jkys.com/log.gif",r="SYNC",i="ASYNC",o="EVENT",a="PAGE",u="VIEW",c="DURATION",s=["custom","actionType","eventName","pageId","domId","domClass","domHref","domName","domTag","domContent","domPath","trackId","referrerId","score","startTime","endTime","durationTime","channel","netType"],f={store:"test",trackKey:"",serverUrl:n,pageTime:!0,watchHistoryAndHash:!0,env:"PRODUCT",console:!0,projectId:null,version:null,domain:"",sendType:i,delayTime:1e3,autoTrackPage:!1,autoTrackClick:!1,autoInstall:!0,delayLink:!0,delayLinkTime:200,useServerTime:!0,corssSubdomain:!1,utokenKey:"TRACKER_IDENTIFY"},l=document.querySelector("script[track-key]");if(l){var p=l.getAttribute("track-key")||"";p&&(f.trackKey=p)}function h(){return f}function d(t){f=e(e({},f),t)}var y=function(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]};var v=function(t){return function e(n){return 0===arguments.length||y(n)?e:t.apply(this,arguments)}};var g=function(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return y(n)?e:v((function(e){return t(n,e)}));default:return y(n)&&y(r)?e:y(n)?v((function(e){return t(e,r)})):y(r)?v((function(e){return t(n,e)})):t(n,r)}}};var m=function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n};var b=function(t,e,n){for(var r=0,i=n.length;r<i;){if(t(e,n[r]))return!0;r+=1}return!1};var _=function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]};var k=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)};var w="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},T=Object.prototype.toString,S=function(){return"[object Arguments]"===T.call(arguments)?function(t){return"[object Arguments]"===T.call(t)}:function(t){return k("callee",t)}}(),E=!{toString:null}.propertyIsEnumerable("toString"),I=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],A=function(){return arguments.propertyIsEnumerable("length")}(),j=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},C="function"!=typeof Object.keys||A?v((function(t){if(Object(t)!==t)return[];var e,n,r=[],i=A&&S(t);for(e in t)!k(e,t)||i&&"length"===e||(r[r.length]=e);if(E)for(n=I.length-1;n>=0;)k(e=I[n],t)&&!j(r,e)&&(r[r.length]=e),n-=1;return r})):v((function(t){return Object(t)!==t?[]:Object.keys(t)})),L=v((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function x(t,e,n,r){var i=m(t),o=m(e);function a(t,e){return O(t,e,n.slice(),r.slice())}return!b((function(t,e){return!b(a,e,t)}),o,i)}function O(t,e,n,r){if(w(t,e))return!0;var i=L(t);if(i!==L(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===_(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!w(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!w(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var o=n.length-1;o>=0;){if(n[o]===t)return r[o]===e;o-=1}switch(i){case"Map":return t.size===e.size&&x(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&x(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=C(t);if(a.length!==C(e).length)return!1;var u=n.concat([t]),c=r.concat([e]);for(o=a.length-1;o>=0;){var s=a[o];if(!k(s,e)||!O(e[s],t[s],u,c))return!1;o-=1}return!0}var P=O,D=g((function(t,e){return P(t,e,[],[])}));function N(t){return t&&"function"==typeof t.then}function V(t,e,n,r,i){var o,a;void 0===n&&(n=99999999999999),void 0===r&&(r="/"),document.cookie=t+"="+e.replace(/;/g,"&&&&")+(n?"; expires="+(o=n,(a=new Date).setTime(a.getTime()+60*o*60*1e3),a.toUTCString()):"")+(r?"; path="+r:"")+(i?"; domain="+i:"")}function U(t){return void 0!==t.oldValue&&("object"==typeof t.value?D(t.value,t.oldValue):t.value===t.oldValue)}function H(t){return""===t.value||void 0===t.value||null===t.value}function R(t,e){void 0===e&&(e=!0),_TrackerGlobalData._trackerFlag=_TrackerGlobalData._trackerFlag||{},_TrackerGlobalData._trackerFlag[t]=e}function K(t){return _TrackerGlobalData._trackerFlag=_TrackerGlobalData._trackerFlag||{},_TrackerGlobalData._trackerFlag[t]||!1}function M(t){for(var e=[t.id?"#"+t.id:t.tagName.toLowerCase()];t.parentNode&&"BODY"!==t.parentNode.tagName;)t=t.parentNode,e.unshift(t.id?"#"+t.id:t.tagName.toLowerCase());return e.join(">")}var q={uid:null,isLogin:!1};function B(t){var n=h();if(t.uid){var r=localStorage.getItem(n.utokenKey+"__"+t.uid);r&&V(n.utokenKey,r)}!function(t){q=e(e({},q),t)}(e(e({},t),{isLogin:!0}))}d({serverUrl:"http://frontlo-collection.qa.91jkys.com/log.gif"}),"undefined"!=typeof Sailer&&"undefined"!=typeof adapt&&adapt.isLogin()&&adapt.getUserInfo().then((function(t){B(t.uid)}));var F={pageId:null,referrerId:function(t){var e=window.location.href.match(/\?(.*)$/);if(!e)return null;for(var n=e[1].split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]==t)return i[1]}return null}("referrer-id"),referrerUrl:document.referrer||"",url:location.origin,host:location.host,path:location.pathname,hash:location.hash,title:document.title||""},W=function(){return e({},F)};var G={libVersion:"1.0.0",libType:"js"};var z=g((function(t,e){for(var n={},r=0;r<t.length;)t[r]in e&&(n[t[r]]=e[t[r]]),r+=1;return n})),Y=[],J=null,X="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})),$=0;function Q(t){var e=h().sendType;e===r?Z(t):e===i&&tt(t)}function Z(t){clearTimeout(J),Y.push(nt(t)),et(Y),Y.length=0}function tt(t){var e=h();if(t&&Y.push(nt(t)),clearTimeout(J),!t&&Y.length>0||Y.length>=10)return et(Y),void(Y.length=0);J=setTimeout((function(){et(Y),Y.length=0}),e.delayTime)}function et(t,r){return function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=!0);var i=h();return new Promise((function(o){var a=t,u=n+"?"+(i.trackKey?"trackKey="+i.trackKey+"&":"")+"time="+Date.now();if("https:"===window.location.protocol&&r&&"function"==typeof window.navigator.sendBeacon&&"function"==typeof Blob){var c=new Blob([a],{type:"text/plain; charset=UTF-8"});if(window.navigator.sendBeacon(u,c))return void o()}if(e){var s=new XMLHttpRequest;s.withCredentials=!0,s.addEventListener("readystatechange",(function(){4===this.readyState&&o()})),s.open("POST",u,!0),s.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),s.withCredentials=!0,s.send(a)}else{var f=new Image;f.onload=function(){o()},f.src=u+"&data="+encodeURIComponent(a)}}))}(JSON.stringify(function(t){var n=h();return $++,e(e(e(e({items:t},function(){return{clientWidth:window.screen.height,clientHeight:window.screen.width,domain:document.domain||""}}()),G),function(){return q}()),{version:n.version})}(t)),r)}function nt(t,n){var r;($++,r=t.custom,"[object Object]"===Object.prototype.toString.call(r))&&(JSON.stringify(t.custom).length<=500&&(t.custom=JSON.stringify(t.custom)));var i=z(s,t),o=W(),a=function(){var t=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection||{},e=t.type||t.effectiveType;return e?{netType:e}:{}}();return"PAGE"===t.actionType&&(o.pageId=null),e(e(e(e({},i),o),a),{trackTime:Date.now(),id:X+"-"+$})}var rt=function(){function t(){this.startTime=Date.now(),this.endTime=Date.now(),this.config=null,this.info=null,this.isStart=!1,this.backInfo=null}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.start=function(t){var e=this;t&&(this.info=t),this.isStart?this.startTime=Date.now():(this.isStart=!0,this.config=h(),window.addEventListener("visibilitychange",(function(){document.hidden?(e.backInfo=e.info,e.end()):(e.info=e.backInfo,e.start())})))},t.prototype.end=function(){this.info&&(this.endTime=Date.now(),this.toSend())},t.prototype.change=function(){this.end(),this.start()},t.prototype.toSend=function(){if(this.config.autoTrackPage||this.info){var t=this.endTime-this.startTime;if(t<100)return;Q(e(e({startTime:this.startTime,durationTime:t},this.info),{actionType:c,trackId:""})),this.info=null}},t.instance=null,t}().getInstance();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var it=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){var n;n=function(t){var e=function(t,e,n){function r(t,e){return function(){var r=arguments;return o((function(){t.apply(n,r)}),e||0)}}function i(t,e){var r=l(e),i=l(t);return r||i?r&&i?(u(Object.keys(e),(function(r){t[r]===n&&(t[r]=e[r])})),t):r?e:t:e}function o(t,e){var n=setTimeout((function(){t()}),e||0);return function(){clearTimeout(n)}}function a(t,e,n){for(var r=-1,i=Object.keys(e),o=i.length,a=f(n);++r<o;){var u=i[r];t[u]=a?n(t[u],e[u],u,t,e):e[u]}return t}function u(t,e,r){for(var i=0,o=t.length;o>i;i++){var a=e.call(r,t[i],i,t);if(a!==n)return a}}function c(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"[object Array]"===Object.prototype.toString.call(t)||!1}function s(t){return t&&1===t.nodeType||!1}function f(t){return"function"==typeof t||!1}function l(t){var e=typeof t;return"function"===e||t&&"object"===e||!1}function p(){}function h(){return(new Date).getTime()}function d(t,e,n){var r=p,i=!1;return function(){var a=h(),u=arguments,c=function(){i=a,t.apply(n,u)};i&&i+e>a?(r(),r=o(c,e)):(i=a,o(c,0))}}function y(e){var n=e||t;return{height:n.innerHeight,width:n.innerWidth}}function v(e,n){return(n||t).getComputedStyle(e,null)}function g(t,e){return t.getPropertyValue(e)}function m(t,e){if(e||(e=v(t)),"none"===g(e,"display"))return!1;var n=t.parentNode;return!s(n)||m(n)}function b(e,n){if(e===(n||t).document)return!0;if(!e||!e.parentNode)return!1;var r=v(e,n),i=g(r,"visibility");return"hidden"!==i&&"collapse"!==i&&m(e,r)}function _(t,e){return!(!t||t.width<=0||t.height<=0)&&t.bottom>0&&t.right>0&&t.top<e.height&&t.left<e.width}function k(t,e){var n=t.getBoundingClientRect(),r=y(e);if(!_(n,r)||!b(t))return 0;var i=0,o=0;return n.top>=0?i=Math.min(n.height,r.height-n.top):n.bottom>0&&(i=Math.min(r.height,n.bottom)),n.left>=0?o=Math.min(n.width,r.width-n.left):n.right>0&&(o=Math.min(r.width,n.right)),i*o/(n.height*n.width)}function w(e,n){if(!(this instanceof w))return new w(e,n);if(!s(e))throw new Error("not an element node");this._element=e,this._config=i(n,{fullyvisible:1,hidden:0,referenceWindow:t,percentageHook:k,precision:3,visibilityHooks:[]});var r=this._config.precision<=0?1:Math.pow(10,this._config.precision||3);this._round=function(t){return Math.round(t*r)/r};var o=S(this._config.referenceWindow);this._config.visibilityHooks.push((function(){return!o.isHidden()}))}function T(t,e){var n=i(e,{strategy:[new T.Strategy.PollingStrategy,new T.Strategy.EventStrategy],async:!1});this._visobj=t,this._state={},this._started=!1;var r="*#"+h();this._pubsub=new E({async:n.async,anyTopicName:r}),this._events=[r,"start","stop","update","hidden","visible","fullyvisible","percentagechange","visibilitychange"],this._strategy=new T.Strategy.CompositeStrategy(n.strategy),this._strategy.init(this),this._pubsub.on("update",(function(t){var e=t._state.percentage,n=t._state.previous.percentage;e!==n&&t._pubsub.publish("percentagechange",[t,e,n])})),this._pubsub.on("update",(function(t){t._state.code!==t._state.previous.code&&t._pubsub.publish("visibilitychange",[t])})),this._pubsub.on("visibilitychange",(function(t){t._state.visible&&!t._state.previous.visible&&t._pubsub.publish("visible",[t])})),this._pubsub.on("visibilitychange",(function(t){t._state.fullyvisible&&t._pubsub.publish("fullyvisible",[t])})),this._pubsub.on("visibilitychange",(function(t){t._state.hidden&&t._pubsub.publish("hidden",[t])})),u(this._events,(function(t){f(n[t])&&this.on(t,n[t])}),this)}var S=function(e){return function(t,e){var n=function(t,e){return{property:t,event:e}},r="visibilitychange";return u([n("webkitHidden","webkit"+r),n("msHidden","ms"+r),n("mozHidden","moz"+r),n("hidden",r)],(function(e){return void 0!==t[e.property]?{isHidden:function(){return!!t[e.property]||!1},onVisibilityChange:function(n){return t.addEventListener(e.event,n,!1),function(){t.removeEventListener(e.event,n,!1)}}}:void 0}))||{isHidden:function(){return!1},onVisibilityChange:function(){return p}}}((e||t).document)},E=function(t){function e(t){this._cache={},this._onAnyCache=[],this._config=i(t,{async:!1,anyTopicName:"*"})}var n=function(t,e){u(t,(function(t){t(e)}))};return e.prototype.on=function(t,e){if(!f(e))return p;var n=function(t){return e.apply(void 0,t||[])},i=this._config.async?r(n):n,o=function(t,e,n){return function(){var n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}};return t===this._config.anyTopicName?(this._onAnyCache.push(i),o(i,this._onAnyCache)):(this._cache[t]||(this._cache[t]=[]),this._cache[t].push(i),o(i,this._cache[t]))},e.prototype.publish=function(t,e){var i=(this._cache[t]||[]).concat(t===this._config.anyTopicName?[]:this._onAnyCache);return(this._config.async?r(n):function(t,e){return n(t,e),p})(i,e||[])},e}();w.prototype.state=function(){return u(this._config.visibilityHooks,(function(t){return t(this._element)?void 0:w.VisState.hidden(0)}),this)||function(t,e,n){var r=t._round(n.percentageHook(e,n.referenceWindow));return r<=n.hidden?w.VisState.hidden(r):r>=n.fullyvisible?w.VisState.fullyvisible(r):w.VisState.visible(r)}(this,this._element,this._config)},w.prototype.percentage=function(){return this.state().percentage},w.prototype.element=function(){return this._element},w.prototype.referenceWindow=function(){return this._config.referenceWindow},w.prototype.isFullyVisible=function(){return this.state().fullyvisible},w.prototype.isVisible=function(){return this.state().visible},w.prototype.isHidden=function(){return this.state().hidden},w.fn=w.prototype,w.of=function(t,e){return new w(t,e)};var I=[0,"hidden"],A=[1,"visible"],j=[2,"fullyvisible"];return w.VisState=function(){function t(t,e,n){return n&&delete n.previous,{code:t[0],state:t[1],percentage:e,previous:n||{},fullyvisible:t[0]===j[0],visible:t[0]===A[0]||t[0]===j[0],hidden:t[0]===I[0]}}return{hidden:function(e,n){return t(I,e,n)},visible:function(e,n){return t(A,e,n)},fullyvisible:function(e,n){return t(j,e,n)}}}(),T.prototype.visobj=function(){return this._visobj},T.prototype.publish=function(t,e){if(this._events.indexOf(t)>=0)throw new Error('Cannot publish internal event "'+t+'" from external scope.');return this._pubsub.publish(t,e)},T.prototype.state=function(){return this._state},T.prototype.start=function(t){if(this._started)return this;var e=i(t,{async:!1});return this._cancelAsyncStart&&this._cancelAsyncStart(),e.async?this.startAsync():(this._started=!0,this.update(),this._pubsub.publish("start",[this]),this._strategy.start(this),this)},T.prototype.startAsync=function(t){this._cancelAsyncStart&&this._cancelAsyncStart();var e=this,n=o((function(){e.start(a(i(t,{}),{async:!1}))}));return this._cancelAsyncStart=function(){n(),e._cancelAsyncStart=null},this},T.prototype.stop=function(){this._cancelAsyncStart&&this._cancelAsyncStart(),this._started&&(this._strategy.stop(this),this._pubsub.publish("stop",[this])),this._started=!1},T.prototype.update=function(){this._started&&(this._state=function(t,e){var n=t.state(),r=n.percentage;return e&&r===e.percentage&&e.percentage===e.previous.percentage?e:n.hidden?w.VisState.hidden(r,e):n.fullyvisible?w.VisState.fullyvisible(r,e):w.VisState.visible(r,e)}(this._visobj,this._state),this._pubsub.publish("update",[this]))},T.prototype.on=function(t,e){return this._pubsub.on(t,e)},T.Builder=function(t){var e={},n=[],r=[],i=!1,o=null;return{set:function(t,n){return e[t]=n,this},strategy:function(t){return n.push(t),this},on:function(t,e){return r.push([t,e]),this},build:function(a){var s=i?o:function(){var a=function(t,e){var n=null,r=!1===t.strategy;if(!r&&(t.strategy||e.length>0)){var i=!!t.strategy,o=c(t.strategy);n=(i?o?t.strategy:[t.strategy]:[]).concat(e)}else n=r?[]:t.strategy;return n}(e,n);e.strategy=a;var s=t.monitor(e);return u(r,(function(t){s.on(t[0],t[1])})),i=!0,o=s}();return f(a)?a(s):s}}},T.Strategy=function(){},T.Strategy.prototype.init=p,T.Strategy.prototype.start=p,T.Strategy.prototype.stop=p,T.Strategy.CompositeStrategy=function(t){this._strategies=c(t)?t:[t]},T.Strategy.CompositeStrategy.prototype=Object.create(T.Strategy.prototype),T.Strategy.CompositeStrategy.prototype.init=function(t){u(this._strategies,(function(e){f(e.init)&&e.init(t)}))},T.Strategy.CompositeStrategy.prototype.start=function(t){u(this._strategies,(function(e){f(e.start)&&e.start(t)}))},T.Strategy.CompositeStrategy.prototype.stop=function(t){u(this._strategies,(function(e){f(e.stop)&&e.stop(t)}))},T.Strategy.PollingStrategy=function(t){this._config=i(t,{interval:1e3}),this._started=!1},T.Strategy.PollingStrategy.prototype=Object.create(T.Strategy.prototype),T.Strategy.PollingStrategy.prototype.start=function(t){return this._started||(this._clearInterval=(e=this._config.interval,n=setInterval((function(){t.update()}),e),function(){clearInterval(n)}),this._started=!0),this._started;var e,n},T.Strategy.PollingStrategy.prototype.stop=function(){return!!this._started&&(this._clearInterval(),this._started=!1,!0)},T.Strategy.EventStrategy=function(t){this._config=i(t,{throttle:50}),this._config.debounce>0&&(this._config.throttle=+this._config.debounce),this._started=!1},T.Strategy.EventStrategy.prototype=Object.create(T.Strategy.prototype),T.Strategy.EventStrategy.prototype.start=function(t){return this._started||(this._removeEventListeners=(e=d((function(){t.update()}),this._config.throttle),n=t.visobj().referenceWindow(),r=S(n).onVisibilityChange(e),n.addEventListener("scroll",e,!1),n.addEventListener("resize",e,!1),n.addEventListener("touchmove",e,!1),function(){n.removeEventListener("touchmove",e,!1),n.removeEventListener("resize",e,!1),n.removeEventListener("scroll",e,!1),r()}),this._started=!0),this._started;var e,n,r},T.Strategy.EventStrategy.prototype.stop=function(){return!!this._started&&(this._removeEventListeners(),this._started=!1,!0)},w.VisMon=T,w.PubSub=E,w.fn.monitor=function(t){return new T(this,t)},w.Utils={async:r,debounce:function(t,e){var n=p;return function(){var r=this,i=arguments;n(),n=o((function(){t.apply(r,i)}),e)}},defaults:i,defer:o,extend:a,forEach:u,fireIf:function(t,e){return function(){return(f(t)?t():t)?e():n}},identity:function(t){return t},isArray:c,isDefined:function(t){return t!==n},isElement:s,isFunction:f,isObject:l,isPageVisible:function(e){return!S(e||t).isHidden()},isVisibleByStyling:b,noop:p,now:h,once:function(t){var e,r=!1;return function(){return r||(e=t.apply(n,arguments),r=!0),e}},throttle:d,percentage:k,VisibilityApi:S(),createVisibilityApi:S,_viewport:y,_isInViewport:_,_isDisplayed:m,_computedStyle:v,_styleProperty:g},w}(t,t.document);return e.noConflict=function(){return e},e},t.exports=function(t){return n(t)}}))(window),ot=it.Utils,at=function(t,e,n){var r=ot.defaults(n,{percentageLimit:1,timeLimit:1e3,interval:100,strategy:void 0}),i=Math.max(r.percentageLimit-.001,0),o=null,a=it.VisMon.Builder(new it(t.element(),{hidden:i,referenceWindow:t.referenceWindow()})).set("strategy",r.strategy).on("visible",(function(t){null===o&&(o=function(t,e,n){var r=0,i=null,o=n.timeLimit,a=n.percentageLimit,u=n.interval;return it.VisMon.Builder(t.visobj()).strategy(new it.VisMon.Strategy.PollingStrategy({interval:u})).on("update",(function(n){if(n.state().percentage<a)i=null;else{var u=ot.now();r=u-(i=i||u)}r>=o&&(n.stop(),t.stop(),e(n))})).on("stop",(function(){i=null})).build()}(t,e,r)),o.start()})).on("hidden",(function(){null!==o&&o.stop()})).on("stop",(function(){null!==o&&o.stop()})).build();return a.start(),function(){a.stop(),o=null}};it.fn.onPercentageTimeTestPassed=function(t,e){at(this,t,e)};var ut=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.trackPage=function(t){void 0===t&&(t={});var n=h();n.pageTime&&rt.end();var r=e({actionType:a},t),i=W(),o=i.pageId,u=i.url;!function(t){F=e(e(e({},F),t),{url:location.origin,host:location.host,path:location.pathname,hash:location.hash,title:document.title||""}),window.aaa=F}({pageId:r.trackId||"",referrerId:o||"",referrerUrl:u||""}),Q(r),n.pageTime&&rt.start(r)},t.prototype.trackDuration=function(t){void 0===t&&(t={}),Q(e({actionType:c},t))},t.prototype.trackEvent=function(t){void 0===t&&(t={}),Q(e({actionType:o,eventName:"CLICK"},t))},t.prototype.trackView=function(t,n,r){void 0===r&&(r={});var i=e({actionType:u,domId:t.id,domClass:t.className,domTag:t.tagName,domContent:t.textContent.substr(0,20),domPath:M(t)},n);it(t).onPercentageTimeTestPassed((function(){Q(i)}),{percentageLimit:r.percentageLimit||.5,timeLimit:r.timeLimit||1e3,interval:200})},t.prototype.track=function(t){switch(t.actionType){case o:this.trackEvent(t);break;case a:this.trackPage(t)}Q(t)},t.prototype.trackLink=function(t,e){void 0===e&&(e={}),t.addEventListener("click",(function(e){e.preventDefault(),setTimeout((function(){t.click()}),300)}),!1),this.trackDom(t,e)},t.prototype.trackDom=function(t,n){void 0===n&&(n={});var r=t;if(r.IS_TRACKED)return clearTimeout(r.DELAY_TRACK_TIME),void(r.DELAY_TRACK_TIME=setTimeout((function(){r.IS_TRACKED=!1}),1e3));r.IS_TRACKED=!0,r.DELAY_TRACK_TIME=setTimeout((function(){r.IS_TRACKED=!1}),1e3);var i={trackId:"",domId:t.id,domClass:t.className,domHref:t.href||"",domName:t.name||"",domTag:t.tagName,domContent:t.textContent.substr(0,20),domPath:M(t)},o=t.getAttribute("data-track");o&&o.search(/^\{[\S\s]*\}$/)>=0?i=e(e({},i),JSON.parse(o)):i.trackId=o||"",n&&(i=e(e({},i),n)),this.trackEvent(i)},t.instance=null,t}().getInstance(),ct=Number.isInteger||function(t){return t<<0===t};var st=function(t){return"[object String]"===Object.prototype.toString.call(t)},ft=g((function(t,e){var n=t<0?e.length+t:t;return st(e)?e.charAt(n):e[n]})),lt=g((function(t,e){return t.map((function(t){for(var n,r=e,i=0;i<t.length;){if(null==r)return;n=t[i],r=ct(n)?ft(n,r):r[n],i+=1}return r}))})),pt=g((function(t,e){return lt([t],e)[0]})),ht=g((function(t,e){return pt([t],e)}));var dt=function(t){return function e(n,r,i){switch(arguments.length){case 0:return e;case 1:return y(n)?e:g((function(e,r){return t(n,e,r)}));case 2:return y(n)&&y(r)?e:y(n)?g((function(e,n){return t(e,r,n)})):y(r)?g((function(e,r){return t(n,e,r)})):v((function(e){return t(n,r,e)}));default:return y(n)&&y(r)&&y(i)?e:y(n)&&y(r)?g((function(e,n){return t(e,n,i)})):y(n)&&y(i)?g((function(e,n){return t(e,r,n)})):y(r)&&y(i)?g((function(e,r){return t(n,e,r)})):y(n)?v((function(e){return t(e,r,i)})):y(r)?v((function(e){return t(n,e,i)})):y(i)?v((function(e){return t(n,r,e)})):t(n,r,i)}}},yt=v((function(t){return function(){return t}})),vt=function(t){return{value:t,map:function(e){return vt(e(t))}}},gt=dt((function(t,e,n){return t((function(t){return vt(e(t))}))(n).value})),mt=dt((function(t,e,n){return gt(t,yt(e),n)}));var bt=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,a){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,a,u){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,a,u,c){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,a,u,c,s){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,a,u,c,s,f){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}};var _t=function t(e,n,r){return function(){for(var i=[],o=0,a=e,u=0;u<n.length||o<arguments.length;){var c;u<n.length&&(!y(n[u])||o>=arguments.length)?c=n[u]:(c=arguments[o],o+=1),i[u]=c,y(c)||(a-=1),u+=1}return a<=0?r.apply(this,i):bt(a,t(e,i,r))}},kt=g((function(t,e){return 1===t?v(e):bt(t,_t(t,[],e))})),wt=kt(2,(function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if("function"==typeof t)try{var i=t.apply(this,n);"object"==typeof i&&ut.track(i)}catch(t){console.error(t)}else if("object"==typeof t)ut.track(t);else if("string"==typeof t){var o={trackId:t};ut.track(o)}return e.apply(this,n)}})),Tt=kt(2,(function(t,e){return function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e.apply(this,r),a=function(){if("function"==typeof t)try{var e=t.apply(n,r);"object"==typeof e&&ut.track(e)}catch(t){console.error(t)}else if("object"==typeof t)ut.track(t);else if("string"==typeof t){var i={trackId:t};ut.track(i)}};return N(o)?o.then((function(t){return a(),t})):(a(),o)}})),St=function(t){var e=[],n={bind:function(n,r,i){var o=e.findIndex((function(t){return t===n})),a=-1!==o;if("none"!==n.style.display){if(a&&e.splice(o,1),a||!U(r)&&!H(r)){var u={};"object"==typeof r.value?u=r.value:"string"==typeof r.value&&r.value&&(u.trackId=r.value),"PAGE"===t?ut.trackPage(u):ut.trackView(n,u)}}else a||e.push(n)},unbind:function(t,n){var r=e.findIndex((function(e){return e===t}));-1!==r&&e.splice(r,1),rt.end()},update:function(t,e,n){}};return n.update=n.bind,n},Et=St("VIEW");function It(t){this._trackerInfo.eventName=t.type.toUpperCase(),ut.trackDom(this,this._trackerInfo)}var At=St("PAGE");function jt(){rt.change()}var Ct=function(t){if(!K("install")){R("install"),t&&d(t);var e=h();!function(){if(!K("historyInjected")){var t={url:"undefined"==typeof document||null==document.location?"":document.location.href},e=window.onpopstate;window.onpopstate=function(){var n={newURL:window.location.href,oldURL:t.url};if(t.url=window.location.href,r.apply(this,["historyPopstate",n]),e)return e.apply(this,arguments)};var n=window.history.pushState;n&&(window.history.pushState=function(e,o,a){var u={newURL:i(t.url,a),oldURL:t.url};if(t={url:u.newURL},r.apply(this,["historyPushState",u]),n)return n.apply(this,arguments)}),R("historyInjected",!0)}function r(t,e){var n=new CustomEvent(t,{detail:e});window.dispatchEvent(n)}function i(t,e){return/:\/\//.test(e)?e:t.match(/^.*:\/\/[^/]+/)[0]+(/^\//.test(e)?"":"/")+e}}(),e.autoTrackPage&&ut.trackPage(),e.watchHistoryAndHash&&(void 0===window.onpopstate&&window.addEventListener("hashchange",jt),window.addEventListener("historyPushState",jt),window.addEventListener("historyPopstate",jt));var n,r=(n=!1,function(){n||(e.pageTime&&rt.end(),tt(),n=!0)});window.addEventListener("beforeunload",r),window.addEventListener("unload",r),document.addEventListener("click",(function(t){t.path;var n=t.target;if(void 0!==t.path&&t.isTrusted)for(var r=function(r){if("BODY"===r.tagName)return"break";if(r.getAttribute("data-track")||e.autoTrackClick&&("A"===r.tagName||"BUTTON"===r.tagName||"INPUT"===r.tagName)&&!r._isWatchTrack)if("A"===n.tagName&&n.href){var i=W().pageId;"string"==typeof i&&(/\?.*=/.test(n.href)?n.href=n.href.replace(/\?/,"?referrer-id="+i+"&"):!1===/\?/.test(n.href)?n.href+="?referrer-id="+i:n.href=n.href.replace(/\?/,"?referrer-id="+i)),e.delayLink&&(t.preventDefault(),setTimeout((function(){ut.trackDom(r),n.click()}),e.delayLinkTime))}else ut.trackDom(r)},i=0,o=t.path;i<o.length;i++){if("break"===r(o[i]))break}}),!1)}};window.addEventListener("load",(function(){h().autoInstall&&Ct()}));var Lt=ut.trackDom,xt=ut.trackPage,Ot=ut.trackEvent,Pt=ut.trackView,Dt=ut.trackLink,Nt=ut.track;if("undefined"==typeof XMLHttpRequest)throw new Error("tracker requires ie10+");"undefined"==typeof _TrackerGlobalData&&(window._TrackerGlobalData={}),t.actionTracker=ut,t.after=Tt,t.before=wt,t.getConfig=h,t.install=Ct,t.login=B,t.logout=function(t){void 0===t&&(t=!1);var e=h(),n=function(t){var e=document.cookie.split("; ");for(var n in e){var r=e[n].split("=");if(t==r[0])return unescape(r[1]).replace(/&&&&/g,";")}return null}(e.utokenKey);t&&(localStorage.setItem(e.utokenKey+"__"+(q.uid||""),n),V(e.utokenKey,null)),q={uid:null,isLogin:!1}},t.send=Q,t.sendAsync=tt,t.sendSync=Z,t.setConfig=d,t.timeTracker=rt,t.track=Nt,t.trackDom=Lt,t.trackEvent=Ot,t.trackLink=Dt,t.trackPage=xt,t.trackView=Pt,t.tracker=function(t){return"function"==typeof t?function(n,r,i){return mt(ht("value",i),(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.call(this,i.value,this);if("function"==typeof o)return o.apply(this,n);if("object"==typeof o){var a=e({},o);ut.trackEvent(a)}return i.value.apply(this,arguments)}),i)}:"object"==typeof t?function(n,r,i){var o=i.value;return i.value=function(){var n=e({},t);return ut.trackEvent(n),o.apply(this,arguments)},i}:function(e,n,r){var i=r.value;return r.value=function(){var e={trackId:t};return ut.trackEvent(e),i.apply(this,arguments)},r}},t.vTrackEvent=function(t,e){if(!U(e)&&!H(e)){var n={};"object"==typeof e.value&&e.value?n=e.value:"string"==typeof e.value?n.trackId=e.value:"number"==typeof e.value&&(n.trackId=e.value+""),t._trackerInfo=n,t._isWatchTrack=!0;var r=Object.keys(e.modifiers).filter((function(t){return e.modifiers[t]}));r.length||r.push("click"),r.forEach((function(e){t.removeEventListener(e,It,!1),t.addEventListener(e,It,!1)}))}},t.vTrackPage=At,t.vTrackView=Et,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=telescope.min.js.map
