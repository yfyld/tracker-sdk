{"code":"import actionTracker from '../core/actionTracker';\r\nimport { notChanged, isEmpty } from '../utils/util';\r\nvar generate = function (type) {\r\n    var watch = [];\r\n    var track = {\r\n        bind: function (el, binding) {\r\n            var index = watch.findIndex(function (element) { return element === el; });\r\n            var isWatched = index !== -1;\r\n            if (el.style.display === 'none') {\r\n                if (!isWatched)\r\n                    watch.push(el);\r\n                return;\r\n            }\r\n            else {\r\n                if (isWatched)\r\n                    watch.splice(index, 1);\r\n            }\r\n            if (!isWatched && (notChanged(binding) || isEmpty(binding)))\r\n                return;\r\n            var info = {};\r\n            if (typeof binding.value === 'object') {\r\n                info = binding.value;\r\n                //if (value.pageURL) args.push(value.pageURL)\r\n            }\r\n            else if (typeof binding.value === 'string' && binding.value) {\r\n                info.trackId = binding.value;\r\n            }\r\n            if (type === 'PAGE') {\r\n                actionTracker.trackPage(info);\r\n            }\r\n            else {\r\n                actionTracker.trackView(el, info);\r\n            }\r\n        },\r\n        unbind: function (el, binding) {\r\n            var index = watch.findIndex(function (element) { return element === el; });\r\n            if (index !== -1)\r\n                watch.splice(index, 1);\r\n        },\r\n        update: function (el, binding) { }\r\n    };\r\n    track.update = track.bind;\r\n    return track;\r\n};\r\nexport default generate;\r\n//# sourceMappingURL=generate.js.map","map":"{\"version\":3,\"file\":\"generate.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/directives/generate.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,aAAa,MAAM,uBAAuB,CAAA;AACjD,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,eAAe,CAAA;AAEnD,IAAM,QAAQ,GAAG,UAAS,IAAY;IACpC,IAAI,KAAK,GAAU,EAAE,CAAA;IAErB,IAAM,KAAK,GAAG;QACZ,IAAI,EAAJ,UAAK,EAAe,EAAE,OAAY;YAChC,IAAI,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,UAAA,OAAO,IAAI,OAAA,OAAO,KAAK,EAAE,EAAd,CAAc,CAAC,CAAA;YACtD,IAAI,SAAS,GAAG,KAAK,KAAK,CAAC,CAAC,CAAA;YAC5B,IAAI,EAAE,CAAC,KAAK,CAAC,OAAO,KAAK,MAAM,EAAE;gBAC/B,IAAI,CAAC,SAAS;oBAAE,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;gBAC9B,OAAM;aACP;iBAAM;gBACL,IAAI,SAAS;oBAAE,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;aACtC;YAED,IAAI,CAAC,SAAS,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC;gBAAE,OAAM;YAEnE,IAAI,IAAI,GAAQ,EAAE,CAAA;YAElB,IAAI,OAAO,OAAO,CAAC,KAAK,KAAK,QAAQ,EAAE;gBACrC,IAAI,GAAG,OAAO,CAAC,KAAK,CAAA;gBACpB,6CAA6C;aAC9C;iBAAM,IAAI,OAAO,OAAO,CAAC,KAAK,KAAK,QAAQ,IAAI,OAAO,CAAC,KAAK,EAAE;gBAC7D,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,CAAA;aAC7B;YACD,IAAI,IAAI,KAAK,MAAM,EAAE;gBACnB,aAAa,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;aAC9B;iBAAM;gBACL,aAAa,CAAC,SAAS,CAAC,EAAE,EAAE,IAAI,CAAC,CAAA;aAClC;QACH,CAAC;QACD,MAAM,EAAN,UAAO,EAAe,EAAE,OAAY;YAClC,IAAI,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,UAAA,OAAO,IAAI,OAAA,OAAO,KAAK,EAAE,EAAd,CAAc,CAAC,CAAA;YACtD,IAAI,KAAK,KAAK,CAAC,CAAC;gBAAE,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;QAC1C,CAAC;QACD,MAAM,EAAN,UAAO,EAAe,EAAE,OAAY,IAAG,CAAC;KACzC,CAAA;IAED,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,IAAI,CAAA;IACzB,OAAO,KAAK,CAAA;AACd,CAAC,CAAA;AAED,eAAe,QAAQ,CAAA\"}"}
