{"code":"import actionTracker from '../core/actionTracker';\r\nimport { notChanged, isEmpty } from '../utils/util';\r\nexport var watch = [];\r\nvar trackView = {\r\n    bind: function (el, binding) {\r\n        var index = watch.findIndex(function (element) { return element === el; });\r\n        var isWatched = index !== -1;\r\n        if (el.style.display === 'none') {\r\n            if (!isWatched)\r\n                watch.push(el);\r\n            return;\r\n        }\r\n        else {\r\n            if (isWatched)\r\n                watch.splice(index, 1);\r\n        }\r\n        if (!isWatched && (notChanged(binding) || isEmpty(binding)))\r\n            return;\r\n        var info = {};\r\n        if (typeof binding.value === 'object') {\r\n            info = binding.value;\r\n            //if (value.pageURL) args.push(value.pageURL)\r\n        }\r\n        else if (typeof binding.value === 'string' && binding.value) {\r\n            info.trackId = binding.value;\r\n        }\r\n        actionTracker.trackPage(info);\r\n    },\r\n    unbind: function (el, binding) {\r\n        var index = watch.findIndex(function (element) { return element === el; });\r\n        if (index !== -1)\r\n            watch.splice(index, 1);\r\n    },\r\n    update: function (el, binding) { }\r\n};\r\ntrackView.update = trackView.bind;\r\nexport default trackView;\r\n//# sourceMappingURL=trackView.js.map","map":"{\"version\":3,\"file\":\"trackView.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/directives/trackView.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,aAAa,MAAM,uBAAuB,CAAA;AACjD,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,eAAe,CAAA;AAEnD,MAAM,CAAC,IAAI,KAAK,GAAS,EAAE,CAAA;AAE3B,IAAM,SAAS,GAAG;IAChB,IAAI,EAAJ,UAAM,EAAc,EAAE,OAAW;QAC/B,IAAI,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,UAAA,OAAO,IAAI,OAAA,OAAO,KAAK,EAAE,EAAd,CAAc,CAAC,CAAA;QACtD,IAAI,SAAS,GAAG,KAAK,KAAK,CAAC,CAAC,CAAA;QAC5B,IAAI,EAAE,CAAC,KAAK,CAAC,OAAO,KAAK,MAAM,EAAE;YAC/B,IAAI,CAAC,SAAS;gBAAE,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;YAC9B,OAAM;SACP;aAAM;YACL,IAAI,SAAS;gBAAE,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;SACtC;QAED,IAAI,CAAC,SAAS,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC;YAAE,OAAM;QAEnE,IAAI,IAAI,GAAO,EAAE,CAAA;QAEjB,IAAI,OAAO,OAAO,CAAC,KAAK,KAAK,QAAQ,EAAE;YACrC,IAAI,GAAG,OAAO,CAAC,KAAK,CAAA;YACpB,6CAA6C;SAC9C;aAAM,IAAI,OAAO,OAAO,CAAC,KAAK,KAAK,QAAQ,IAAI,OAAO,CAAC,KAAK,EAAE;YAC7D,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,CAAA;SAC7B;QACD,aAAa,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;IAC/B,CAAC;IACD,MAAM,EAAN,UAAQ,EAAc,EAAE,OAAW;QACjC,IAAI,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,UAAA,OAAO,IAAI,OAAA,OAAO,KAAK,EAAE,EAAd,CAAc,CAAC,CAAA;QACtD,IAAI,KAAK,KAAK,CAAC,CAAC;YAAE,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;IAC1C,CAAC;IACD,MAAM,EAAN,UAAO,EAAc,EAAE,OAAW,IAAE,CAAC;CACtC,CAAA;AAED,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC,IAAI,CAAA;AAEjC,eAAe,SAAS,CAAA\"}"}
