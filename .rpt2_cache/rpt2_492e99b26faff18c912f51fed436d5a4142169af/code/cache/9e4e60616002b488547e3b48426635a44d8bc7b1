{"code":"import * as tslib_1 from \"tslib\";\r\nimport isFunction from 'lodash-es/isFunction';\r\nimport propSet from 'lodash-es/set';\r\nimport actionTracker from \"../core/actionTracker\";\r\nvar track = function (partical, key, descriptor) {\r\n    if (isFunction(partical)) {\r\n        return function (target, key, descriptor) {\r\n            var value = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                var fn = partical.call(this, descriptor.value, this);\r\n                if (typeof fn === 'function') { //参数为高阶函数\r\n                    return fn.apply(this, args);\r\n                }\r\n                else { //普通函数\r\n                    if (typeof fn === 'object') {\r\n                        var data_1 = tslib_1.__assign({}, fn);\r\n                        actionTracker.track(data_1);\r\n                    }\r\n                    return descriptor.value.apply(this, arguments);\r\n                }\r\n            };\r\n            // if (descriptor.initializer) {\r\n            //   return propSet('initializer', function() {\r\n            //     const value = descriptor.initializer.apply(this);\r\n            //     return function (...args) {\r\n            //       return partical.call(this, value, this).apply(this, args);\r\n            //     }\r\n            //   }, descriptor);\r\n            // }\r\n            return propSet(descriptor, 'value', value);\r\n        };\r\n    }\r\n    else if (typeof partical === 'object' && typeof partical.constructor === 'function') {\r\n        //无参数,默认使用属性名作为trackID\r\n        var value_1 = function () {\r\n            var data = {\r\n                trackId: key,\r\n            };\r\n            actionTracker.track(data);\r\n            return propSet(descriptor, 'value', value_1);\r\n        };\r\n        return descriptor;\r\n    }\r\n    else if (typeof partical === 'object') {\r\n        return function (target, key, descriptor) {\r\n            var oldValue = descriptor.value;\r\n            descriptor.value = function () {\r\n                var data = tslib_1.__assign({}, partical);\r\n                actionTracker.track(data);\r\n                return oldValue.apply(this, arguments);\r\n            };\r\n            return descriptor;\r\n        };\r\n    }\r\n    else {\r\n        //参数为string 作为tarckId\r\n        return function (target, key, descriptor) {\r\n            var oldValue = descriptor.value;\r\n            descriptor.value = function () {\r\n                var data = {\r\n                    trackId: partical,\r\n                };\r\n                actionTracker.track(data);\r\n                return oldValue.apply(this, arguments);\r\n            };\r\n            return descriptor;\r\n        };\r\n    }\r\n};\r\nexport default track;\r\n//# sourceMappingURL=track.js.map","map":"{\"version\":3,\"file\":\"track.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/decoratiors/track.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,UAAU,MAAM,sBAAsB,CAAC;AAC9C,OAAO,OAAO,MAAM,eAAe,CAAC;AAGpC,OAAO,aAAa,MAAM,uBAAuB,CAAA;AAGjD,IAAM,KAAK,GAAG,UAAC,QAAY,EAAC,GAAU,EAAC,UAA6B;IAClE,IAAI,UAAU,CAAC,QAAQ,CAAC,EAAE;QACxB,OAAO,UAAC,MAAU,EAAE,GAAU,EAAE,UAA6B;YAC3D,IAAM,KAAK,GAAG;gBAAU,cAAW;qBAAX,UAAW,EAAX,qBAAW,EAAX,IAAW;oBAAX,yBAAW;;gBACjC,IAAM,EAAE,GAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,CAAA;gBACpD,IAAG,OAAO,EAAE,KAAG,UAAU,EAAC,EAAC,SAAS;oBAClC,OAAO,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;iBAC5B;qBAAI,EAAC,MAAM;oBACV,IAAG,OAAO,EAAE,KAAG,QAAQ,EAAC;wBACtB,IAAM,MAAI,wBAAK,EAAE,CAAC,CAAA;wBAClB,aAAa,CAAC,KAAK,CAAC,MAAI,CAAC,CAAA;qBAC1B;oBACD,OAAO,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;iBAChD;YACH,CAAC,CAAA;YACD,gCAAgC;YAChC,+CAA+C;YAC/C,wDAAwD;YACxD,kCAAkC;YAClC,mEAAmE;YACnE,QAAQ;YACR,oBAAoB;YACpB,IAAI;YACJ,OAAO,OAAO,CAAC,UAAU,EAAC,OAAO,EAAE,KAAK,CAAC,CAAA;QAC3C,CAAC,CAAA;KACF;SAAK,IAAG,OAAO,QAAQ,KAAG,QAAQ,IAAE,OAAO,QAAQ,CAAC,WAAW,KAAG,UAAU,EAAC;QAC5E,sBAAsB;QACtB,IAAM,OAAK,GAAC;YACV,IAAM,IAAI,GAAC;gBACT,OAAO,EAAC,GAAG;aACZ,CAAA;YACD,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;YACzB,OAAO,OAAO,CAAC,UAAU,EAAC,OAAO,EAAE,OAAK,CAAC,CAAA;QAC3C,CAAC,CAAA;QACD,OAAO,UAAU,CAAA;KAClB;SAAK,IAAG,OAAO,QAAQ,KAAG,QAAQ,EAAC;QAElC,OAAO,UAAC,MAAU,EAAE,GAAU,EAAE,UAA6B;YAC3D,IAAI,QAAQ,GAAG,UAAU,CAAC,KAAK,CAAC;YAChC,UAAU,CAAC,KAAK,GAAC;gBACf,IAAM,IAAI,wBACL,QAAQ,CACZ,CAAA;gBACD,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;gBACzB,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;YACzC,CAAC,CAAA;YACD,OAAO,UAAU,CAAA;QACnB,CAAC,CAAA;KACF;SAAK;QACJ,qBAAqB;QACrB,OAAO,UAAC,MAAU,EAAE,GAAU,EAAE,UAA6B;YAC3D,IAAI,QAAQ,GAAG,UAAU,CAAC,KAAK,CAAC;YAChC,UAAU,CAAC,KAAK,GAAC;gBACf,IAAM,IAAI,GAAC;oBACT,OAAO,EAAC,QAAQ;iBACjB,CAAA;gBACD,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;gBACzB,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;YACzC,CAAC,CAAA;YACD,OAAO,UAAU,CAAA;QACnB,CAAC,CAAA;KACF;AAGH,CAAC,CAAA;AAED,eAAe,KAAK,CAAA\"}"}
